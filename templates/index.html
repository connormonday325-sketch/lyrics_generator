<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lyrics AI ðŸŽµ</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>
  <div class="container">
    <h1>Lyrics AI ðŸŽµ</h1>
    <p class="subtitle">A simple Lyrics Generator built with Flask.</p>

    <div class="form-box">
      <label>Mode</label>
      <select id="mode">
        <option value="ai">AI Lyrics Mode (Smart Generated)</option>
        <option value="random">Random Lyrics Mode</option>
      </select>

      <label>Song Style</label>
      <select id="style">
        <option value="Afrobeats">Afrobeats</option>
        <option value="Hip-Hop">Hip-Hop</option>
        <option value="R&B">R&B</option>
        <option value="Pop">Pop</option>
      </select>

      <label>Mood</label>
      <select id="mood">
        <option value="Happy">Happy</option>
        <option value="Sad">Sad</option>
        <option value="Motivational">Motivational</option>
        <option value="Street">Street</option>
      </select>

      <label>Artist Inspiration</label>
      <select id="artist">
        <option value="Burna Boy">Burna Boy</option>
        <option value="Wizkid">Wizkid</option>
        <option value="Drake">Drake</option>
        <option value="Davido">Davido</option>
      </select>

      <button class="generate-btn" onclick="generateLyrics()">Generate Lyrics</button>
    </div>

    <div class="output-box">
      <h2>Generated Lyrics</h2>
      <pre id="lyricsOutput">Your lyrics will appear here...</pre>

      <div class="btn-row">
        <button class="copy-btn" onclick="copyLyrics()">Copy</button>
        <button class="download-btn" onclick="downloadLyrics()">Download</button>
        <button class="share-btn" onclick="shareLyrics()">Share</button>
      </div>
    </div>

    <div class="history-box">
      <h2>ðŸ“œ Lyrics History</h2>
      <div id="historyList"></div>
      <button class="clear-btn" onclick="clearHistory()">ðŸ—‘ Clear History</button>
    </div>
  </div>

  <script>
    let history = [];

    async function generateLyrics() {
      const mode = document.getElementById("mode").value;
      const style = document.getElementById("style").value;
      const mood = document.getElementById("mood").value;
      const artist = document.getElementById("artist").value;

      const formData = new FormData();
      formData.append("mode", mode);
      formData.append("style", style);
      formData.append("mood", mood);
      formData.append("artist", artist);

      const response = await fetch("/generate", {
        method: "POST",
        body: formData
      });

      const data = await response.json();
      document.getElementById("lyricsOutput").textContent = data.lyrics;

      // Save history
      history.push(data.lyrics);
      updateHistory();
    }

    function copyLyrics() {
      const text = document.getElementById("lyricsOutput").textContent;
      navigator.clipboard.writeText(text);
      alert("Lyrics copied!");
    }

    function downloadLyrics() {
      const text = document.getElementById("lyricsOutput").textContent;
      const blob = new Blob([text], { type: "text/plain" });
      const link = document.createElement("a");
      link.href = URL.createObjectURL(blob);
      link.download = "lyrics.txt";
      link.click();
    }

    function shareLyrics() {
      const text = document.getElementById("lyricsOutput").textContent;
      if (navigator.share) {
        navigator.share({
          title: "Lyrics AI",
          text: text
        });
      } else {
        alert("Share not supported on this device.");
      }
    }

    function updateHistory() {
      const historyList = document.getElementById("historyList");
      historyList.innerHTML = "";

      history.forEach((lyrics, index) => {
        const item = document.createElement("div");
        item.className = "history-item";
        item.textContent = "Lyrics " + (index + 1) + " (Tap to open)";
        item.onclick = () => {
          document.getElementById("lyricsOutput").textContent = lyrics;
        };
        historyList.appendChild(item);
      });
    }

    function clearHistory() {
      history = [];
      updateHistory();
      alert("History cleared!");
    }
  </script>

</body>
          </html>
